(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54616cf1"],{"090b":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("el-button",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{plain:""},on:{click:t.btnClick}},[t._v(t._s(t.message))]),s("Geet",{attrs:{isGeet:t.isgt},on:{geetPath:t.GeetPath,clickChange:t.GeetChange}})],1)},o=[],a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("i",{ref:"btn"})])},i=[],c={data:function(){return{}},props:["isGeet"],methods:{GtCaptcha:function(){var t=this;t.axios.get("http://www.geetest.com/demo/gt/register-slide?t="+(new Date).getTime()).then((function(e){console.log("1,页面初始化，调用极验接口1，进行图形验证码的加载"),console.log(e);var s=e.data,n=function(e){e.onSuccess((function(){var n=e.getValidate(),o={geetest_challenge:n.geetest_challenge,geetest_validate:n.geetest_validate,geetest_seccode:n.geetest_seccode,status:s.success};console.log("3，图形验证通过，将数据传递给父组件，进行服务端验证"),t.$emit("geetPath",o)})).onError((function(){})),t.$refs.btn.addEventListener("click",(function(){t.$emit("clickChange",!1),t.isGeet&&e.verify()}))};t.$initGeet({gt:s.gt,challenge:s.challenge,product:"bind",offline:!s.success,https:!0},n)}))}},computed:{},created:function(){this.GtCaptcha()},mounted:function(){},watch:{isGeet:function(){this.$refs.btn.click()}}},r=c,l=s("4023"),u=Object(l["a"])(r,a,i,!1,null,"7cd6df79",null),f=u.exports,g={data:function(){return{flog:0,isgt:!1,message:"点击验证"}},components:{Geet:f},methods:{btnClick:function(){console.log("2,按钮被点击，进行图形验证"),this.isgt=!this.isgt},GeetChange:function(t){this.isgt=t},GeetPath:function(t){var e=0;console.log("4,接受到图形验证参数，将参数发往服务端进行验证"),console.log(t),this.flog=t.status,1==this.flog&&(this.$notify({title:"验证成功",message:"",type:"success"}),e=1),this.isgt=!1,this.$emit("ok",e)}},computed:{},created:function(){},mounted:function(){}},m=g,d=Object(l["a"])(m,n,o,!1,null,"5b9a482f",null);e["a"]=d.exports},"90fc":function(t,e,s){},a55b:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("div",[n("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[n("div",[n("img",{attrs:{src:s("f350"),alt:""}})]),n("div",{staticClass:"clearfix"},[n("span",[t._v("使用CMall账号 登录网站")])]),n("div",{staticClass:"item"},[n("el-form",{ref:"form",attrs:{model:t.form}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"用户名"},model:{value:t.form.user_name,callback:function(e){t.$set(t.form,"user_name",e)},expression:"form.user_name"}})],1),n("el-form-item",[n("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1),n("GtPage",{on:{ok:t.ok}}),n("el-link",{staticStyle:{float:"right","margin-bottom":"20px"},attrs:{type:"primary",href:"/#/register"}},[t._v("没有账号？请先注册>")]),n("el-button",{staticStyle:{width:"100px","margin-right":"90px"},attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")]),n("el-button",{staticStyle:{width:"100px"},on:{click:t.goBack}},[t._v("返回")])],1)])],1)])},o=[],a=s("0eaa"),i=s("ae8c"),c=s("955c"),r=s("090b"),l={name:"Login",data:function(){return{okk:0,form:{user_name:"",password:""}}},methods:Object(a["a"])(Object(a["a"])({ok:function(t){this.okk=t}},Object(i["b"])(["setUser","setToken"])),{},{goBack:function(){this.$router.go(-1)},login:function(){var t=this;1==this.okk?c["c"](this.form).then((function(e){if(200===e.status){var s=JSON.stringify(e.data.user);localStorage.setItem("user",s),localStorage.setItem("token",e.data.token),t.setUser(e.data.user),t.setToken(e.data.token),t.notifySucceed("登录成功"),t.$router.push({name:"Home"})}else t.notifyError("登录失败",e.msg)})).catch((function(e){t.notifyError("登录失败",e)})):this.notifyError("请验证","")}}),comments:{},components:{GtPage:r["a"]}},u=l,f=(s("c7ed"),s("4023")),g=Object(f["a"])(u,n,o,!1,null,"61132483",null);e["default"]=g.exports},c7ed:function(t,e,s){"use strict";var n=s("90fc"),o=s.n(n);o.a}}]);
//# sourceMappingURL=chunk-54616cf1.f06e96cc.js.map