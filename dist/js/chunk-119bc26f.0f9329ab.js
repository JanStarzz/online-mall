(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-119bc26f"],{8873:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"confirmOrder"},[a("div",{staticClass:"top-header"},[a("div",{staticClass:"cart-header"},[a("div",{staticClass:"logo"},[a("router-link",{attrs:{to:"/"}},[a("img",{attrs:{src:e("f350"),alt:""}})])],1),t._m(0),a("div",{staticClass:"cart-header-right"},[a("div",{staticClass:"cart-header-select"},[a("el-dropdown",[a("router-link",{staticClass:"href",attrs:{to:""}},[a("span",{staticStyle:{"margin-right":"5px"}},[t._v(t._s(this.$store.getters.getUser.nickname))]),a("i",{staticClass:"el-icon-caret-bottom"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("router-link",{attrs:{to:"/"}},[a("el-dropdown-item",{staticClass:"dropdown-menu"},[t._v("首页")])],1),a("router-link",{attrs:{to:"/center"}},[a("el-dropdown-item",{staticClass:"dropdown-menu"},[t._v("个人中心")])],1),a("router-link",{attrs:{to:"/"}},[a("el-dropdown-item",{staticClass:"dropdown-menu"},[t._v("评价晒单")])],1),a("router-link",{attrs:{to:"/favorite"}},[a("el-dropdown-item",{staticClass:"dropdown-menu"},[t._v("我的收藏")])],1)],1)],1)],1),a("div",{staticClass:"cart-header-order"},[a("span",[t._v("|")]),a("router-link",{staticClass:"href",attrs:{to:"/order"}},[t._v("我的订单")])],1)])])]),a("div",{staticClass:"content"},[a("div",{staticClass:"section-address"},[a("p",{staticClass:"title"},[t._v("收货地址")]),a("div",{staticClass:"address-body"},[a("ul",[a("router-link",{attrs:{to:""}},t._l(t.address,(function(s){return a("li",{key:s.id,class:s.id==t.confirmAddress?"in-section":"",on:{click:function(e){return t.selectAddress(s)}}},[a("h2",[t._v(t._s(s.name))]),a("p",{staticClass:"phone"},[t._v(t._s(s.phone))]),a("p",{staticClass:"address"},[t._v(t._s(s.address))])])})),0),a("li",{staticClass:"add-address",on:{click:function(s){t.addVisible=!0}}},[a("i",{staticClass:"el-icon-circle-plus-outline"}),a("p",[t._v("添加新地址")])])],1)])]),a("div",{staticClass:"section-goods"},[a("p",{staticClass:"title"},[t._v("商品及优惠券")]),a("div",{staticClass:"goods-list"},[a("ul",t._l(t.getCheckGoods,(function(s){return a("li",{key:s.id},[a("img",{attrs:{src:s.img_path}}),a("span",{staticClass:"pro-name"},[t._v(t._s(s.name))]),a("span",{staticClass:"pro-price"},[t._v(t._s(s.discount_price)+"元")]),a("span",{staticClass:"pro-num"},[t._v("x "+t._s(s.num))]),a("span",{staticClass:"pro-status"}),a("span",{staticClass:"pro-total"},[t._v(t._s(s.discount_price*s.num)+"元")])])})),0)])]),t._m(1),t._m(2),a("div",{staticClass:"section-count"},[a("div",{staticClass:"money-box"},[a("ul",[a("li",[a("span",{staticClass:"title"},[t._v("商品件数：")]),a("span",{staticClass:"value"},[t._v(t._s(t.getCheckNum)+"件")])]),a("li",[a("span",{staticClass:"title"},[t._v("商品总价：")]),a("span",{staticClass:"value"},[t._v(t._s(t.getTotalPrice)+"元")])]),t._m(3),t._m(4),t._m(5),a("li",{staticClass:"total"},[a("span",{staticClass:"title"},[t._v("应付总额：")]),a("span",{staticClass:"value"},[a("span",{staticClass:"total-price"},[t._v(t._s(t.getTotalPrice))]),t._v("元 ")])])])])]),a("div",{staticClass:"section-bar"},[a("div",{staticClass:"btn"},[a("router-link",{staticClass:"btn-base btn-return",attrs:{to:"/cart"}},[t._v("返回购物车")]),a("a",{staticClass:"btn-base btn-primary",attrs:{href:"javascript:void(0);"},on:{click:t.addOrder}},[t._v("结算")])],1)])]),a("el-dialog",{attrs:{title:"新建收货地址",visible:t.addVisible,width:"30%"},on:{"update:visible":function(s){t.addVisible=s}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:t.form.name,callback:function(s){t.$set(t.form,"name",s)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{model:{value:t.form.phone,callback:function(s){t.$set(t.form,"phone",s)},expression:"form.phone"}})],1),a("el-form-item",{attrs:{label:"详细地址"}},[a("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:t.form.address,callback:function(s){t.$set(t.form,"address",s)},expression:"form.address"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.postEdit}},[t._v("确 定")]),a("el-button",{on:{click:function(s){t.addVisible=!1}}},[t._v("取 消")])],1)],1)],1)},r=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"cart-header-content"},[e("p",[t._v("确认订单")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"section-shipment"},[e("p",{staticClass:"title"},[t._v("配送方式")]),e("p",{staticClass:"shipment"},[t._v("包邮")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"section-invoice"},[e("p",{staticClass:"title"},[t._v("发票")]),e("p",{staticClass:"invoice"},[t._v("电子发票")]),e("p",{staticClass:"invoice"},[t._v("个人")]),e("p",{staticClass:"invoice"},[t._v("商品明细")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("li",[e("span",{staticClass:"title"},[t._v("活动优惠：")]),e("span",{staticClass:"value"},[t._v("-0元")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("li",[e("span",{staticClass:"title"},[t._v("优惠券抵扣：")]),e("span",{staticClass:"value"},[t._v("-0元")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("li",[e("span",{staticClass:"title"},[t._v("运费：")]),e("span",{staticClass:"value"},[t._v("0元")])])}],i=e("0eaa"),n=e("ae8c"),o=e("ab20"),c=e("d8dd"),d=e("9fec"),l={name:"",data:function(){return{confirmAddress:0,address:[],addVisible:!1,form:{user_id:"",name:"",phone:"",address:""}}},created:function(){this.getCheckNum<1&&(this.notifyError("请勾选商品后再结算"),this.$router.push({path:"/cart"})),this.getAddress()},computed:Object(i["a"])({},Object(n["c"])(["getCheckNum","getTotalPrice","getCheckGoods"])),methods:Object(i["a"])(Object(i["a"])({},Object(n["b"])(["deleteShoppingCart"])),{},{selectAddress:function(t){this.confirmAddress=t.id},getAddress:function(){var t=this;o["c"](this.$store.getters.getUser.id,this.$store.getters.getToken).then((function(s){200===s.status?t.address=s.data:20001===s.status?t.loginExpired(s.msg):t.notifyError("获取收货地址失败",s.msg)})).catch((function(s){t.notifyError("获取收货地址失败",s)}))},addOrder:function(){var t=this;if(0!==this.confirmAddress)for(var s=this.getCheckGoods,e=function(e){r={user_id:t.$store.getters.getUser.id,product_id:s[e].product_id,num:s[e].num,address_id:t.confirmAddress},c["b"](r,t.$store.getters.getToken).then((function(a){if(200===a.status){var r=s[e],i={user_id:t.$store.getters.getUser.id,product_id:r.product_id};d["a"](i,t.$store.getters.getToken).then((function(s){200===s.status?t.deleteShoppingCart(r.product_id):20001===s.status?t.loginExpired(s.msg):t.notifyError("购物车删除失败",s.msg)})).catch((function(s){t.notifyError("购物车删除失败",s)})),t.$router.push({path:"/order"})}else 20001===a.status?t.loginExpired(a.msg):t.notifyError("结算失败",a.msg)})).catch((function(s){t.notifyError("结算失败",s)}))},a=0;a<s.length;a++){var r;e(a)}else this.notifyError("请选择收货地址",null)},postEdit:function(){var t=this;this.form.user_id=this.$store.getters.getUser.id,o["b"](this.form,this.$store.getters.getToken).then((function(s){200===s.status?(t.address=s.data,t.addVisible=!1,t.notifySucceed("新建收货地址成功")):20001===s.status?t.loginExpired(s.msg):t.notifyError("新建收货地址失败",s.msg)})).catch((function(s){t.notifyError("新建收货地址失败",s)}))}})},u=l,p=(e("ddf4"),e("4023")),f=Object(p["a"])(u,a,r,!1,null,"74275c13",null);s["default"]=f.exports},"9d93":function(t,s,e){},ab20:function(t,s,e){"use strict";e.d(s,"b",(function(){return i})),e.d(s,"c",(function(){return n})),e.d(s,"d",(function(){return o})),e.d(s,"a",(function(){return c}));var a=e("82ae"),r=e.n(a),i=function(t,s){return r.a.post("/api/v1/addresses",t,{params:{token:s}}).then((function(t){return t.data}))},n=function(t,s){return r.a.get("/api/v1/addresses/".concat(t),{params:{token:s}}).then((function(t){return t.data}))},o=function(t,s){return r.a.put("/api/v1/addresses",t,{params:{token:s}}).then((function(t){return t.data}))},c=function(t,s){return r.a.delete("/api/v1/addresses",{data:{address_id:t},params:{token:s}}).then((function(t){return t.data}))}},d8dd:function(t,s,e){"use strict";e.d(s,"b",(function(){return i})),e.d(s,"a",(function(){return n})),e.d(s,"c",(function(){return o}));var a=e("82ae"),r=e.n(a),i=function(t,s){return r.a.post("/api/v1/orders",t,{params:{token:s}}).then((function(t){return t.data}))},n=function(t,s,e,a){return r.a.get("/api/v1/user/".concat(t,"/orders"),{params:{start:s,limit:e,token:a}}).then((function(t){return t.data}))},o=function(t,s){return r.a.get("/api/v1/orders/".concat(t),{params:{token:s}}).then((function(t){return t.data}))}},ddf4:function(t,s,e){"use strict";var a=e("9d93"),r=e.n(a);r.a}}]);
//# sourceMappingURL=chunk-119bc26f.0f9329ab.js.map